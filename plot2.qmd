---
title: "Untitled"
format: html
---

```{python}
import pandas as pd
import altair as alt
from vega_datasets import data
import json

# Read the CSV file
df = pd.read_excel(r"C:\Users\eddie\OneDrive\Documents\GitHub\final_project\HC_11.1_with_PV_data.xlsx")
```

```{python}
# Filter for just region rows without divisions
regions_df = df[df['division'].isna() & df['region'].notna()].copy()

chart = alt.Chart(regions_df).mark_point().encode(
    x=alt.X('any_household_energy_insecurity:Q', 
            title='Energy Insecurity (%)',
            scale=alt.Scale(zero=False)),
    y=alt.Y('total_cap_ac_region:Q',
            title='Total AC Capacity',
            scale=alt.Scale(zero=False)),
    color=alt.Color('region:N', title='Region'),
    tooltip=[
        alt.Tooltip('region:N', title='Region'),
        alt.Tooltip('any_household_energy_insecurity:Q', title='Energy Insecurity (%)', format='.2f'),
        alt.Tooltip('total_cap_ac_region:Q', title='AC Capacity', format='.2f')
    ]
).properties(
    width=600,
    height=400,
    title='Energy Insecurity vs AC Capacity by Region'
).interactive()
```


```{python}
chart.display()
```


```{python}
# Filter for just region rows without divisions
regions_df = df[df['division'].isna() & df['region'].notna()].copy()

division_chart = alt.Chart(regions_df).mark_point(
    size=200,  # Make points larger
    filled=True,  # Fill the points
    opacity=0.7  # Add some transparency
).encode(
    x=alt.X('any_household_energy_insecurity:Q', 
            title='Energy Insecurity (%)',
            scale=alt.Scale(zero=False, padding=50)),  # Add padding to x-axis
    y=alt.Y('total_cap_ac_region:Q',
            title='Total AC Capacity',
            scale=alt.Scale(zero=False, padding=50)),  # Add padding to y-axis
    color=alt.Color('region:N', 
                   title='Region',
                   scale=alt.Scale(scheme='category10')),  # Use a better color scheme
    tooltip=[
        alt.Tooltip('region:N', title='Region'),
        alt.Tooltip('any_household_energy_insecurity:Q', title='Energy Insecurity (%)', format='.2f'),
        alt.Tooltip('total_cap_ac_region:Q', title='AC Capacity', format='.2f')
    ]
).properties(
    width=800,  # Make chart wider
    height=500,  # Make chart taller
    title='Energy Insecurity vs AC Capacity by Region'
).interactive()
```


```{python}
divisions_chart.display()
```